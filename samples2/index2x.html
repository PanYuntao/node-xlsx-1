<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title> - jsFiddle demo by innovatejs</title> 
    <script type='text/javascript' src='http://code.jquery.com/jquery-1.8.2.js'></script>
    <link rel="stylesheet" type="text/css" href="./css/normalize.css">
    <link rel="stylesheet" type="text/css" href="./css/default,dev,dev.css"/>
    <link rel="stylesheet" type="text/css" href="./css/style.css">

    <script type='text/javascript' src="./js/browser_xlsx.js"></script>
    <script type='text/javascript' src="./js/droparea.js"></script>
  </head>

  <body>

    <div id="area">
      <h3>DROPAREA</h3>
      <input type="file" class="droparea spot" name="xfile" data-post="/data/dev/droparea/upload.php" data-width="220" data-height="160" data-crop="true"/>
      <input type="file" class="droparea spot" name="xfile" data-post="/data/dev/droparea/upload.php" data-width="220" data-height="160" data-crop="true" data-canvas="true"/>
      <div class="clearfix"></div>
      <br/>
    </div>

    <script>
      // Calling jQuery "droparea" plugin
      $('.droparea').droparea({
      'instructions': 'drop a file or click to here',
      'init' : function(result){
      //console.log('custom init',result);
      },
      'start' : function(area){
      area.find('.error').remove(); 
      },
      'error' : function(result, input, area){
      $('<div class="error">').html(result.error).prependTo(area); 
        return 0;
        //console.log('custom error',result.error);
        },
        'complete' : function(result, file, input, area){
        if((/image/i).test(file.type)){
        area.find('img').remove();
        //area.data('value',result.filename);
        area.append($('<img>',{'src': result.path + result.filename + '?' + Math.random()}));
        } 
        //console.log('custom complete',result);
        }
        });
    </script>

  </body>
</html>
